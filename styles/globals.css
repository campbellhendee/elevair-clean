@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg: #020617;
  --text: #e2e8f0;
  --muted: #94a3b8;
  --accent: #22d3ee;
}
body { color: var(--text); background: var(--bg); }

html { scroll-behavior: smooth; }

/* Subtle typographic polish */
@layer base {
  html { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }
  body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
}

/* Futuristic animated text gradient */
@keyframes spectrum {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@layer utilities {
  .text-spectral {
    background-image: linear-gradient(90deg, #22d3ee, #60a5fa, #a78bfa, #f472b6, #22d3ee);
    background-size: 300% 300%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: spectrum 8s ease-in-out infinite;
  }
}

/* Hero background utility using provided abstract image with gradient fallback */
@layer utilities {
  .bg-hero {
    /* Brighter overlay for better mobile readability */
    background-image:
      radial-gradient(ellipse at 30% 0%, rgba(2, 6, 23, 0.0), rgba(2, 6, 23, 0.4) 55%, rgba(2, 6, 23, 0.75) 100%),
      image-set(
        url('/bg/hero-abstract-2560.webp') 2x,
        url('/bg/hero-abstract-1536.webp') 1x,
        url('/bg/hero-abstract.jpg') 2x,
        url('/bg/hero-abstract.jpg') 1x
      );
    background-size: 100% 100%, cover;
    background-position: center top, center top;
    background-repeat: no-repeat;
  }
  
  /* Mobile-specific adjustments */
  @media (max-width: 640px) {
    .bg-hero {
      background-image:
        radial-gradient(ellipse at 30% 0%, rgba(2, 6, 23, 0.1), rgba(2, 6, 23, 0.5) 55%, rgba(2, 6, 23, 0.8) 100%),
        image-set(
          url('/bg/hero-abstract-1536.webp') 1x,
          url('/bg/hero-abstract.jpg') 1x
        );
    }
  }
}

/* Utilities */
@layer utilities {
  /* Soft cyan glow for text */
  .glow-cyan {
    text-shadow:
      0 0 10px rgba(34, 211, 238, 0.30),
      0 0 22px rgba(34, 211, 238, 0.18);
  }

  /* Enhanced typography scale */
  .text-display { 
    @apply text-4xl sm:text-6xl lg:text-7xl font-black tracking-tight leading-none; 
  }
  .text-headline { 
    @apply text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight; 
  }
  .text-subhead { 
    @apply text-lg sm:text-xl lg:text-2xl font-medium leading-relaxed; 
  }
  .text-supporting { 
    @apply text-sm sm:text-base text-slate-400 leading-relaxed; 
  }
  .text-metric { 
    @apply text-3xl sm:text-4xl font-bold text-cyan-400; 
  }
  
  /* Improved section spacing */
  .section-spacing {
    @apply py-16 sm:py-20 lg:py-24;
  }
  .section-spacing-sm {
    @apply py-12 sm:py-16 lg:py-20;
  }
}

/* Respect reduced motion for spectral text */
@media (prefers-reduced-motion: reduce) {
  .text-spectral { animation: none; }
  .animate-typing-7 { animation: none; border-right: 0; }
  
  /* Disable all animations for reduced motion users */
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .section-reveal {
    opacity: 1 !important;
    transform: none !important;
  }
}

/* Subtle grid overlay */
.hero-grid {
  background-image:
    linear-gradient(to right, rgba(255,255,255,0.025) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,0.02) 1px, transparent 1px);
  background-size: 32px 32px;
  mask-image: radial-gradient(ellipse at center, rgba(0,0,0,0.6), transparent 70%);
}

/* Aurora gradient animation */
@keyframes aurora-shift {
  0%   { background-position: 0% 50% }
  50%  { background-position: 100% 50% }
  100% { background-position: 0% 50% }
}

@keyframes aurora-diagonal {
  0%   { background-position: 0% 0% }
  50%  { background-position: 100% 100% }
  100% { background-position: 0% 0% }
}

/* Very small, subtle drift around center */
@keyframes aurora-drift-small {
  0%   { background-position: 47% 47% }
  50%  { background-position: 53% 53% }
  100% { background-position: 47% 47% }
}

@keyframes aurora-beam-shift {
  0%   { background-position: -200% -200%; }
  50%  { background-position: 0% 0%; }
  100% { background-position: 200% 200%; }
}

@layer utilities {
  /* Animated, subtle aurora gradient */
  .bg-aurora {
    background-image:
      radial-gradient(1000px 600px at 15% 0%, rgba(34,211,238,0.12), transparent 60%),
      radial-gradient(900px 500px at 85% 0%, rgba(96,165,250,0.10), transparent 60%),
      linear-gradient(120deg, rgba(2,6,23,0.85), rgba(2,6,23,0.95));
    background-size: 200% 200%;
    animation-name: aurora-shift;
    animation-duration: 22s;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
  }

  .bg-aurora-fast { animation-duration: 12s; }
  .bg-aurora-slow { animation-duration: 32s; }

  .bg-aurora-diagonal { animation-name: aurora-diagonal; }
  .bg-aurora-tiny-drift {
    animation-name: aurora-drift-small;
    animation-duration: 60s;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
  }

  .bg-aurora-subtle {
    background-image:
      radial-gradient(1000px 600px at 15% 0%, rgba(34,211,238,0.08), transparent 60%),
      radial-gradient(900px 500px at 85% 0%, rgba(96,165,250,0.06), transparent 60%),
      linear-gradient(120deg, rgba(2,6,23,0.88), rgba(2,6,23,0.96));
  }

  .bg-aurora-bold {
    background-image:
      radial-gradient(1000px 600px at 15% 0%, rgba(34,211,238,0.22), transparent 60%),
      radial-gradient(900px 500px at 85% 0%, rgba(96,165,250,0.20), transparent 60%),
      linear-gradient(120deg, rgba(2,6,23,0.80), rgba(2,6,23,0.92));
  }

  /* Bold diagonal beam sweep for obvious motion */
  .bg-aurora-beam {
    pointer-events: none;
    background-image:
      linear-gradient(
        130deg,
        rgba(34,211,238,0.00) 40%,
        rgba(34,211,238,0.40) 50%,
        rgba(34,211,238,0.00) 60%
      ),
      linear-gradient(
        130deg,
        rgba(96,165,250,0.00) 35%,
        rgba(96,165,250,0.20) 50%,
        rgba(96,165,250,0.00) 65%
      );
    background-size: 280% 280%, 320% 320%;
    animation: aurora-beam-shift 9s ease-in-out infinite;
    mix-blend-mode: screen;
    opacity: 0.9;
    will-change: background-position;
  }

  /* Subtle background beam (home page overlay) */
  .bg-aurora-beam-soft {
    pointer-events: none;
    background-image:
      linear-gradient(
        130deg,
        rgba(34,211,238,0.00) 42%,
        rgba(34,211,238,0.16) 50%,
        rgba(34,211,238,0.00) 58%
      ),
      linear-gradient(
        130deg,
        rgba(96,165,250,0.00) 38%,
        rgba(96,165,250,0.08) 50%,
        rgba(96,165,250,0.00) 62%
      );
    background-size: 340% 340%, 380% 380%;
    animation: aurora-beam-shift 20s ease-in-out infinite;
    mix-blend-mode: screen;
    opacity: 0.22;
    will-change: background-position;
  }

  /* Extra-strong, noticeable beam (home page) */
  .bg-aurora-beam-strong {
    pointer-events: none;
    background-image:
      linear-gradient(
        130deg,
        rgba(34,211,238,0.00) 35%,
        rgba(34,211,238,0.32) 50%,
        rgba(34,211,238,0.00) 65%
      ),
      linear-gradient(
        130deg,
        rgba(96,165,250,0.00) 30%,
        rgba(96,165,250,0.18) 50%,
        rgba(96,165,250,0.00) 70%
      );
    background-size: 280% 280%, 320% 320%;
    animation: aurora-beam-shift 12s ease-in-out infinite;
    mix-blend-mode: screen;
    opacity: 0.6;
    will-change: background-position;
  }

  /* Foreground aurora layer for depth */
  .bg-aurora-front {
    pointer-events: none;
    background-image:
      radial-gradient(700px 420px at 70% 20%, rgba(34,211,238,0.12), transparent 60%),
      radial-gradient(600px 360px at 30% 10%, rgba(167,139,250,0.10), transparent 60%);
    background-size: 300% 300%;
    animation-name: aurora-diagonal;
    animation-duration: 36s;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    mix-blend-mode: screen;
    opacity: 0.8;
  }

  /* Subtle grid overlay for depth (masked) */
  .bg-grid {
    background-image:
      linear-gradient(to right, rgba(255,255,255,0.025) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 32px 32px;
    mask-image: radial-gradient(ellipse at center, rgba(0,0,0,0.6), transparent 70%);
  }

  /* Gentle vignette to protect text contrast */
  .bg-vignette {
    background: radial-gradient(ellipse at center, rgba(2,6,23,0) 30%, rgba(2,6,23,0.5) 80%);
  }

  /* Process page background: subtle corner glows, no motion */
  .bg-process {
    background-image:
      radial-gradient(900px 500px at 0% 0%, rgba(34,211,238,0.08), transparent 60%),
      radial-gradient(900px 500px at 100% 100%, rgba(96,165,250,0.07), transparent 60%);
    background-repeat: no-repeat;
    background-size: 100% 100%, 100% 100%;
    background-position: left top, right bottom;
  }

  /* Alternating step band glows */
  .bg-band-left {
    background-image: radial-gradient(900px 420px at 0% 20%, rgba(34,211,238,0.06), transparent 60%);
  }
  .bg-band-right {
    background-image: radial-gradient(900px 420px at 100% 20%, rgba(96,165,250,0.05), transparent 60%);
  }

  /* Scroll reveal (quieter) */
  .reveal { opacity: 0; transform: translateY(4px); transition: opacity .4s ease, transform .4s ease; }
  .reveal-visible { opacity: 1; transform: translateY(0); }

  /* Sticky rail underline style */
  .rail-link { position: relative; }
  .rail-link-active::after {
    content: ""; position: absolute; left: 12px; right: 12px; bottom: 6px; height: 2px;
    background: linear-gradient(90deg, rgba(34,211,238,.6), rgba(96,165,250,.6));
    border-radius: 2px;
  }
}

@media (prefers-reduced-motion: reduce) {
  .reveal { opacity: 1 !important; transform: none !important; transition: none !important; }
}

/* Mobile tuning */
@media (max-width: 640px) {
  .bg-aurora-beam {
    opacity: 1;
    background-size: 320% 320%, 360% 360%;
  }
  .bg-aurora-beam-strong {
    opacity: 0.7;
    background-size: 320% 320%, 360% 360%;
  }
}

/* Hero background animations */
@keyframes hero-float-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(50px, -30px) scale(1.1); }
  66% { transform: translate(-20px, 20px) scale(0.95); }
}

@keyframes hero-float-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-30px, 50px) scale(0.95); }
  66% { transform: translate(30px, -20px) scale(1.05); }
}

@keyframes hero-float-3 {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.15); }
}

@layer utilities {
  .animate-hero-float-1 {
    animation: hero-float-1 20s ease-in-out infinite;
  }
  
  .animate-hero-float-2 {
    animation: hero-float-2 25s ease-in-out infinite;
  }
  
  .animate-hero-float-3 {
    animation: hero-float-3 30s ease-in-out infinite;
  }

  /* Section reveal animations */
  .section-reveal {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .section-reveal.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .bg-aurora,
  .bg-aurora-fast,
  .bg-aurora-slow,
  .bg-aurora-diagonal,
  .bg-aurora-tiny-drift,
  .bg-aurora-front,
  .bg-aurora-beam,
  .bg-aurora-beam-strong { animation: none; }
  
  .animate-hero-float-1,
  .animate-hero-float-2,
  .animate-hero-float-3 {
    animation: none;
  }
  
  .section-reveal {
    opacity: 1;
    transform: none;
    transition: none;
  }
}
